# AI Workflow Automation Configuration
# Generated by Configuration Wizard on 2025-12-31 18:16:52
# Updated on 2026-01-21 to correct project classification as SPA

project:
  name: "guia_turistico"
  kind: "client_spa"
  description: "Tourist guide Single-Page Application with geolocation tracking"
tech_stack:
  primary_language: "javascript"
  framework: "vanilla_js"
  build_system: "npm"
  test_framework: "jest"
  test_command: "npm test"
  lint_command: "npm run lint"
  routing: "hash_based"
  spa_entry: "src/app.js"
structure:
  source_dirs:
    - src
  test_dirs:
    - tests
    - __tests__
  docs_dirs:
    - docs
  ui_dirs:
    - src/html
    - src/views
  css_dirs:
    - src
  static_assets:
    - src/index.html
    - src/favicon.ico
spa:
  routes:
    - path: "/"
      view: "src/views/home.js"
      description: "Main geolocation tracking interface"
    - path: "/converter"
      view: "src/views/converter.js"
      description: "Coordinate converter utility"
  components:
    - src/html/HTMLPositionDisplayer.js
    - src/html/HTMLAddressDisplayer.js
    - src/html/HTMLSidraDisplayer.js
    - src/html/HTMLReferencePlaceDisplayer.js
    - src/html/HTMLHighlightCardsDisplayer.js
    - src/html/HtmlSpeechSynthesisDisplayer.js

# Conditional Step Execution Configuration
conditionals:
  step7_test_execution:
    skip_if:
      - no_code_changes: true
      - only_docs_changed: true
    run_if:
      - "src/**/*.js": changed
      - "__tests__/**/*.test.js": changed
    description: "Skip tests if only documentation or non-code files changed"
  
  step4_directory_structure:
    skip_if:
      - no_new_files: true
    cache_duration: 24h
    description: "Cache directory structure scan for 24 hours if no new files"
  
  step3_syntax_validation:
    skip_if:
      - no_js_changes: true
    run_if:
      - "src/**/*.js": changed
      - "**/*.js": changed
    description: "Skip syntax validation if no JavaScript files changed"
  
  step5_coverage_report:
    skip_if:
      - only_docs_changed: true
      - only_tests_changed: true
    run_if:
      - "src/**/*.js": changed
    description: "Skip coverage generation for docs-only or test-only changes"

# Change Detection Patterns
change_patterns:
  code_files:
    - "src/**/*.js"
    - "src/**/*.css"
    - "src/**/*.html"
  test_files:
    - "__tests__/**/*.js"
    - "tests/**/*.py"
  documentation_files:
    - "**/*.md"
    - "docs/**/*"
  config_files:
    - "package.json"
    - ".github/**/*.yml"
    - ".workflow-config.yaml"

# Change-Type Detection Configuration (Conventional Commits)
change_detection:
  enabled: true
  convention: "conventional_commits"
  
  types:
    feat:
      description: "New features"
      impact: "high"
      test_strategy: "all"
      examples:
        - "feat: add geolocation tracking"
        - "feat(ui): new location display component"
    
    fix:
      description: "Bug fixes"
      impact: "medium"
      test_strategy: "related"
      examples:
        - "fix: correct coordinate calculation"
        - "fix(api): handle null response"
    
    docs:
      description: "Documentation only"
      impact: "low"
      test_strategy: "none"
      examples:
        - "docs: update README"
        - "docs(api): improve JSDoc comments"
    
    refactor:
      description: "Code refactoring"
      impact: "medium"
      test_strategy: "comprehensive"
      examples:
        - "refactor: simplify address parser"
        - "refactor(tests): improve test structure"
    
    test:
      description: "Test changes only"
      impact: "low"
      test_strategy: "tests_only"
      examples:
        - "test: add unit tests for ReverseGeocoder"
        - "test(e2e): improve navigation tests"
    
    style:
      description: "Code style/formatting"
      impact: "low"
      test_strategy: "syntax_only"
      examples:
        - "style: format with prettier"
        - "style: fix eslint warnings"
    
    perf:
      description: "Performance improvements"
      impact: "medium"
      test_strategy: "all"
      examples:
        - "perf: optimize geocoding cache"
        - "perf(speech): reduce synthesis latency"
    
    chore:
      description: "Maintenance tasks"
      impact: "low"
      test_strategy: "minimal"
      examples:
        - "chore: update dependencies"
        - "chore(build): configure webpack"
    
    ci:
      description: "CI/CD changes"
      impact: "low"
      test_strategy: "minimal"
      examples:
        - "ci: add GitHub Actions workflow"
        - "ci: update test coverage threshold"
    
    build:
      description: "Build system changes"
      impact: "low"
      test_strategy: "minimal"
      examples:
        - "build: update npm scripts"
        - "build: configure rollup"
  
  # Step routing based on change type
  routing:
    feat:
      steps:
        - security_audit
        - syntax_validation
        - directory_structure
        - test_execution
        - coverage_report
        - quality_checks
        - doc_validation
      description: "Run all validation steps for new features"
    
    fix:
      steps:
        - security_audit
        - syntax_validation
        - test_execution
        - quality_checks
      description: "Focus on testing and quality for bug fixes"
    
    docs:
      steps:
        - syntax_validation
        - doc_validation
      description: "Minimal validation for documentation changes"
    
    refactor:
      steps:
        - security_audit
        - syntax_validation
        - test_execution
        - coverage_report
        - quality_checks
      description: "Comprehensive testing for refactoring"
    
    test:
      steps:
        - syntax_validation
        - test_execution
      description: "Run test suite for test changes"
    
    style:
      steps:
        - syntax_validation
        - quality_checks
      description: "Syntax and style validation only"
    
    perf:
      steps:
        - security_audit
        - syntax_validation
        - test_execution
        - coverage_report
      description: "Full testing for performance changes"
    
    chore:
      steps:
        - security_audit
        - syntax_validation
      description: "Minimal validation for maintenance tasks"
    
    ci:
      steps:
        - syntax_validation
      description: "Syntax check only for CI changes"
    
    build:
      steps:
        - security_audit
        - syntax_validation
        - test_execution
      description: "Validate build system changes"
  
  # Fallback configuration
  fallback:
    steps:
      - security_audit
      - syntax_validation
      - test_execution
      - coverage_report
    description: "Default steps when type cannot be determined"
  
  # Pattern detection (if commit message doesn't follow convention)
  pattern_detection:
    enabled: true
    patterns:
      - regex: "^(add|implement|create)\\s"
        type: "feat"
      - regex: "^(fix|repair|correct|resolve)\\s"
        type: "fix"
      - regex: "^(doc|document|readme)\\s"
        type: "docs"
      - regex: "^(refactor|restructure|reorganize)\\s"
        type: "refactor"
      - regex: "^(test|spec)\\s"
        type: "test"
      - regex: "^(style|format|lint)\\s"
        type: "style"
      - regex: "^(perf|optimize|speed)\\s"
        type: "perf"
