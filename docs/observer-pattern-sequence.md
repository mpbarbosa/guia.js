# Observer Pattern Execution Flow in `src/guia.js`\n\nThis document describes the execution flow of the Observer pattern as implemented in `guia.js`, focusing on the position update process.\n\n## Key Components\n\n- **Subject:** `PositionManager` (through its `ObserverSubject` composition)\n- **Observers:** Any object with an `update()` method (e.g., `ReverseGeocoder`, `HTMLPositionDisplayer`, `Chronometer`, etc.)\n- **Event:** Position update\n\n## Sequence Diagram\n\n```mermaid\nsequenceDiagram\n    participant GeolocationService\n    participant PositionManager\n    participant ObserverSubject\n    participant Observer1 as Chronometer/HTMLPositionDisplayer/ReverseGeocoder (Observers)\n    Note over GeolocationService: 1. GeolocationService gets new position\n    GeolocationService->>PositionManager: update(position)\n    Note over PositionManager: 2. PositionManager validates and updates position\n    PositionManager->>ObserverSubject: notifyObservers(this, eventType)\n    ObserverSubject->>Observer1: observer.update(PositionManager, eventType)\n    Note over Observer1: 3. Each observer reacts accordingly (UI, geocode, etc.)\n```\n\n## Flow Description\n\n1. **GeolocationService** obtains a new position (e.g., from the browser API).\n2. It calls `PositionManager.update(position)`.\n3. `PositionManager` validates the position (accuracy, distance, time).\n4. If valid, it calls `ObserverSubject.notifyObservers(this, eventType)`.\n5. `ObserverSubject` iterates through all subscribed observers, calling their `update()` method.\n6. Each observer (such as `ReverseGeocoder`, `Chronometer`, or UI components) reacts to the update.\n\n## Example Observers in `guia.js`\n\n- `ReverseGeocoder`: Receives new positions and fetches the address.\n- `Chronometer`: Resets timer on position updates.\n- UI classes: Update HTML views with current location or address.\n\n## References\n\n- See classes: `ObserverSubject`, `PositionManager`, and the `subscribe`, `notifyObservers`, `update` methods in [`/src/guia.js`](https://github.com/mpbarbosa/guia_js/blob/main/src/guia.js).